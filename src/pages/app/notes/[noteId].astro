---
import MainLayout from "@/layouts/MainLayout.astro";
import NoteDetailView from "@/components/views/NoteDetailView";
import { requireAuth } from "@/lib/utils/auth-guard";

export const prerender = false;

// Require authentication
requireAuth(Astro);

// Get the noteId from URL params
const { noteId } = Astro.params;

// Ensure noteId exists
if (!noteId) {
  return Astro.redirect("/app/notes");
}
---

<MainLayout title="Szczegóły notatki">
  <NoteDetailView noteId={noteId} client:load />
</MainLayout>
